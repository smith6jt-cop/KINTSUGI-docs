Traceback (most recent call last):
  File "C:\Users\smith6jt\miniforge3\envs\KINTSUGI\lib\site-packages\jupyter_cache\executors\utils.py", line 58, in single_nb_execution
    executenb(
  File "C:\Users\smith6jt\miniforge3\envs\KINTSUGI\lib\site-packages\nbclient\client.py", line 1314, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "C:\Users\smith6jt\miniforge3\envs\KINTSUGI\lib\site-packages\jupyter_core\utils\__init__.py", line 165, in wrapped
    return loop.run_until_complete(inner)
  File "C:\Users\smith6jt\miniforge3\envs\KINTSUGI\lib\asyncio\base_events.py", line 647, in run_until_complete
    return future.result()
  File "C:\Users\smith6jt\miniforge3\envs\KINTSUGI\lib\site-packages\nbclient\client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "C:\Users\smith6jt\miniforge3\envs\KINTSUGI\lib\site-packages\nbclient\client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "C:\Users\smith6jt\miniforge3\envs\KINTSUGI\lib\site-packages\nbclient\client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import json
import os
from datetime import datetime as dt
import warnings
warnings.filterwarnings('ignore')
import feather
import matplotlib.pyplot as plt
import pandas as pd
from alpineer import load_utils
from matplotlib import rc_file_defaults
import matplotlib.gridspec as gridspec
import numpy as np
import pyFlowSOM
import seaborn as sns
from matplotlib.colors import ListedColormap
from tifffile import imread
from tqdm.notebook import tqdm
import stackview

from ark.phenotyping import (cell_cluster_utils, cell_meta_clustering,
                             cell_som_clustering, weighted_channel_comp)
from ark.utils import data_utils, plot_utils
from ark.utils.metacluster_remap_gui import (MetaClusterGui,
                                             colormap_helper,
                                             metaclusterdata_from_files)
------------------


[1;31m---------------------------------------------------------------------------[0m
[1;31mAttributeError[0m                            Traceback (most recent call last)
Cell [1;32mIn[1], line 20[0m
[0;32m     17[0m [38;5;28;01mfrom[39;00m [38;5;21;01mtqdm[39;00m[38;5;21;01m.[39;00m[38;5;21;01mnotebook[39;00m [38;5;28;01mimport[39;00m tqdm
[0;32m     18[0m [38;5;28;01mimport[39;00m [38;5;21;01mstackview[39;00m
[1;32m---> 20[0m [38;5;28;01mfrom[39;00m [38;5;21;01mark[39;00m[38;5;21;01m.[39;00m[38;5;21;01mphenotyping[39;00m [38;5;28;01mimport[39;00m (cell_cluster_utils, cell_meta_clustering,
[0;32m     21[0m                              cell_som_clustering, weighted_channel_comp)
[0;32m     22[0m [38;5;28;01mfrom[39;00m [38;5;21;01mark[39;00m[38;5;21;01m.[39;00m[38;5;21;01mutils[39;00m [38;5;28;01mimport[39;00m data_utils, plot_utils
[0;32m     23[0m [38;5;28;01mfrom[39;00m [38;5;21;01mark[39;00m[38;5;21;01m.[39;00m[38;5;21;01mutils[39;00m[38;5;21;01m.[39;00m[38;5;21;01mmetacluster_remap_gui[39;00m [38;5;28;01mimport[39;00m (MetaClusterGui,
[0;32m     24[0m                                              colormap_helper,
[0;32m     25[0m                                              metaclusterdata_from_files)

File [1;32m~\KINTSUGI-docs\src\notebooks\ark\phenotyping\weighted_channel_comp.py:11[0m
[0;32m      8[0m [38;5;28;01mimport[39;00m [38;5;21;01mscipy[39;00m[38;5;21;01m.[39;00m[38;5;21;01mstats[39;00m [38;5;28;01mas[39;00m [38;5;21;01mstats[39;00m
[0;32m      9[0m [38;5;28;01mfrom[39;00m [38;5;21;01malpineer[39;00m [38;5;28;01mimport[39;00m io_utils, misc_utils
[1;32m---> 11[0m [38;5;28;01mfrom[39;00m [38;5;21;01mark[39;00m[38;5;21;01m.[39;00m[38;5;21;01manalysis[39;00m [38;5;28;01mimport[39;00m visualize
[0;32m     14[0m [38;5;28;01mdef[39;00m [38;5;21mcompute_p2c_weighted_channel_avg[39m(pixel_channel_avg, channels, cell_counts,
[0;32m     15[0m                                      fovs[38;5;241m=[39m[38;5;28;01mNone[39;00m, pixel_cluster_col[38;5;241m=[39m[38;5;124m'[39m[38;5;124mpixel_meta_cluster_rename[39m[38;5;124m'[39m):
[0;32m     16[0m [38;5;250m    [39m[38;5;124;03m"""Compute the average marker expression for each cell weighted by pixel cluster[39;00m
[0;32m     17[0m 
[0;32m     18[0m [38;5;124;03m    This expression is weighted by the pixel SOM/meta cluster counts. So for each cell,[39;00m
[1;32m   (...)[0m
[0;32m     43[0m [38;5;124;03m            Returns the average marker expression for each cell in the dataset[39;00m
[0;32m     44[0m [38;5;124;03m    """[39;00m

File [1;32m~\KINTSUGI-docs\src\notebooks\ark\analysis\visualize.py:5[0m
[0;32m      3[0m [38;5;28;01mimport[39;00m [38;5;21;01mpandas[39;00m [38;5;28;01mas[39;00m [38;5;21;01mpd[39;00m
[0;32m      4[0m [38;5;28;01mimport[39;00m [38;5;21;01mseaborn[39;00m [38;5;28;01mas[39;00m [38;5;21;01msns[39;00m
[1;32m----> 5[0m [38;5;28;01mimport[39;00m [38;5;21;01mspatial_lda[39;00m[38;5;21;01m.[39;00m[38;5;21;01mvisualization[39;00m [38;5;28;01mas[39;00m [38;5;21;01msv[39;00m
[0;32m      6[0m [38;5;28;01mfrom[39;00m [38;5;21;01malpineer[39;00m [38;5;28;01mimport[39;00m misc_utils
[0;32m      8[0m [38;5;28;01mfrom[39;00m [38;5;21;01mark[39;00m[38;5;21;01m.[39;00m[38;5;21;01mutils[39;00m[38;5;21;01m.[39;00m[38;5;21;01mspatial_lda_utils[39;00m [38;5;28;01mimport[39;00m make_plot_fn

File [1;32m~\miniforge3\envs\KINTSUGI\lib\site-packages\spatial_lda\__init__.py:1[0m
[1;32m----> 1[0m [38;5;28;01mfrom[39;00m [38;5;21;01m.[39;00m[38;5;21;01monline_lda[39;00m [38;5;28;01mimport[39;00m LatentDirichletAllocation

File [1;32m~\miniforge3\envs\KINTSUGI\lib\site-packages\spatial_lda\online_lda.py:31[0m
[0;32m     26[0m [38;5;28;01mfrom[39;00m [38;5;21;01msklearn[39;00m[38;5;21;01m.[39;00m[38;5;21;01mdecomposition[39;00m[38;5;21;01m.[39;00m[38;5;21;01m_online_lda_fast[39;00m [38;5;28;01mimport[39;00m (mean_change, _dirichlet_expectation_1d,
[0;32m     27[0m                                                     _dirichlet_expectation_2d)
[0;32m     29[0m [38;5;28;01mfrom[39;00m [38;5;21;01mtqdm[39;00m[38;5;21;01m.[39;00m[38;5;21;01mauto[39;00m [38;5;28;01mimport[39;00m tqdm
[1;32m---> 31[0m EPS [38;5;241m=[39m np[38;5;241m.[39mfinfo([43mnp[49m[38;5;241;43m.[39;49m[43mfloat[49m)[38;5;241m.[39meps
[0;32m     34[0m [38;5;28;01mdef[39;00m [38;5;21m_update_doc_distribution[39m(X, exp_topic_word_distr, doc_topic_prior,
[0;32m     35[0m                              max_iters,
[0;32m     36[0m                              mean_change_tol, cal_sstats, random_state):
[0;32m     37[0m [38;5;250m    [39m[38;5;124;03m"""E-step: update document-topic distribution.[39;00m
[0;32m     38[0m 
[0;32m     39[0m [38;5;124;03m    Parameters[39;00m
[1;32m   (...)[0m
[0;32m     75[0m 
[0;32m     76[0m [38;5;124;03m    """[39;00m

File [1;32m~\miniforge3\envs\KINTSUGI\lib\site-packages\numpy\__init__.py:353[0m, in [0;36m__getattr__[1;34m(attr)[0m
[0;32m    348[0m     warnings[38;5;241m.[39mwarn(
[0;32m    349[0m         [38;5;124mf[39m[38;5;124m"[39m[38;5;124mIn the future `np.[39m[38;5;132;01m{[39;00mattr[38;5;132;01m}[39;00m[38;5;124m` will be defined as the [39m[38;5;124m"[39m
[0;32m    350[0m         [38;5;124m"[39m[38;5;124mcorresponding NumPy scalar.[39m[38;5;124m"[39m, [38;5;167;01mFutureWarning[39;00m, stacklevel[38;5;241m=[39m[38;5;241m2[39m)
[0;32m    352[0m [38;5;28;01mif[39;00m attr [38;5;129;01min[39;00m __former_attrs__:
[1;32m--> 353[0m     [38;5;28;01mraise[39;00m [38;5;167;01mAttributeError[39;00m(__former_attrs__[attr])
[0;32m    355[0m [38;5;28;01mif[39;00m attr [38;5;241m==[39m [38;5;124m'[39m[38;5;124mtesting[39m[38;5;124m'[39m:
[0;32m    356[0m     [38;5;28;01mimport[39;00m [38;5;21;01mnumpy[39;00m[38;5;21;01m.[39;00m[38;5;21;01mtesting[39;00m [38;5;28;01mas[39;00m [38;5;21;01mtesting[39;00m

[1;31mAttributeError[0m: module 'numpy' has no attribute 'float'.
`np.float` was a deprecated alias for the builtin `float`. To avoid this error in existing code, use `float` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.float64` here.
The aliases was originally deprecated in NumPy 1.20; for more details and guidance see the original release note at:
    https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations

